
<div class="container">
  <div class="row">
    <section class="table-data" *ngIf="projects">
        <mat-form-field>
            <input type="text" [(ngModel)]="townFilter.townTitle" matInput placeholder="Search By Town" [matAutocomplete]="auto">
        </mat-form-field>
        <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of towns" [value]="option.name">{{option.name}}</mat-option>
          </mat-autocomplete>


        <mat-form-field>
        <mat-select placeholder="Search by theme">
            <mat-option *ngFor="let theme of themes" [value]="theme.name">
              {{theme.name}}
            </mat-option>
        </mat-select>
        </mat-form-field>
        <table mat-table [dataSource]="projects" class="example-table"
           matSort matSortActive="created" matSortDisableClear matSortDirection="desc">
           <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Nom</th>
              <td routerLink="'/'"  mat-cell *matCellDef="let row">{{row.name}}</td>
            </ng-container>
            <ng-container matColumnDef="townTitle">
                <th mat-header-cell *matHeaderCellDef>Commune</th>
                <td mat-cell *matCellDef="let row"><a class="btn btn-primary" routerLink="/town/{{row.townTitle | lowercase}}">{{row.townTitle}}</a></td>
            </ng-container>
            <ng-container matColumnDef="themes">
                <th mat-header-cell *matHeaderCellDef>Commune</th>
                <td mat-cell *matCellDef="let row"><span *ngFor="let theme of row.themes">{{ theme.name }} </span></td>
            </ng-container>
            <ng-container matColumnDef="startdate">
                <th mat-header-cell *matHeaderCellDef>Date de d√©but</th>
                <td mat-cell *matCellDef="let row">{{row.startdate | date:"dd/MM/yy"}}</td>
            </ng-container>
            <ng-container matColumnDef="stopdate">
                <th mat-header-cell *matHeaderCellDef>Date de fin</th>
                <td mat-cell *matCellDef="let row">{{row.stopdate | date:"dd/MM/yy"}}</td>
            </ng-container>
            <ng-container matColumnDef="progression">
                <th mat-header-cell *matHeaderCellDef>Progression</th>
                <td mat-cell *matCellDef="let row">{{ getProgression(row.stopdate,row.startdate) }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </section>
    </div>
</div>
